<!DOCTYPE html>
<html>
  <head>
    <title>Festival XML</title>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" type="text/css" href="stylesheet.en.css"/>
    <!--
    <meta name="keywords" content="KW1, KW2, KW3"/>

    <meta name="author" content="AUTHOR"/>
    <meta name="description" content="A_DESCRIPTION"/>
    -->
  </head>
  <body lang="en" class="computing">
    <nav>
      <div>
        <p><a rel="prev" href="festival.html">Festival Text To Speech Software</a></p>
        <p><a            href="festvox.html">Festvox</a></p>
        <p><a            href="tts.html">Text To Speech (TTS) Software</a></p>
        <p><a            href="espeak-tags.html">SSML and HTML Tags Recognized by Espeak</a></p>
      </div>
      <div>
        <p><a            href="xml.en.html">XML: The eXtensible Markup Language</a></p>
        <p><a            href="programming.html">Programming Computers</a></p>
        <p><a            href="ai.html">Artificial Intelligence</a></p>
      </div>
    </nav>

    <main>

      <p>Raw text has the problem that it cannot always easily be rendered as speech in the way the author wishes. Sable offers a well-defined way of marking up text so that the synthesizer may render it appropriately.</p>

      <h1>Festival XML Mark-UP: SSML and HTML</h1>

      <p style="text-align: right">(From <cite><a href="http://www.festvox.org/docs/manual-2.4.0/festival_10.html#XML_002fSGML-mark_002dup">XML/SGML mark-up</a></cite>)</p>

      <p><strong>NOTE</strong> In my Ubuntu distributions, examples are found in directory <cite>/usr/share/doc/festival/examples/</cite>.</p>

      <hr/>

      <p>The ideas of a general, synthesizer system nonspecific, mark-up language for labelling text has been under discussion for some time. Festival has supported an SGML based markup language through multiple versions most recently STML (sproat97). This is based on the earlier SSML (Speech Synthesis Markup Language) which was supported by previous versions of Festival (taylor96). With this version of Festival we support Sable a similar mark-up language devised by a consortium from Bell Labls, Sub Microsystems, AT&amp;T and Edinburgh, sable98.</p>
      <p>Unlike the previous versions, which were SGML based, the implementation of Sable in Festival is now XML based. To the user the difference is negligable but using XML makes processing of files easier and more standardized. Also Festival now includes an XML, parser thus reducing the dependencies in processing Sable text.</p>

      <hr/>

      <p>The definition of Sable is by no means settled and is still in development. In this release Festival offers people working on Sable and other XML (and SGML) based markup languages a chance to quickly experiment with prototypes by providing a DTD (document type descriptions) and the mapping of the elements in the DTD to Festival functions. Although we have not yet (personally) investigated facilities like cascading style sheets and generalized SGML specification languages like DSSSL, we believe the facilities offer by Festival allow rapid prototyping of speech output markup languages.</p>
      <p>Primarily we see Sable markup text as a language that will be generated by other programs, e.g. text generation systems, dialog managers etc. therefore a standard, easy to parse, format is required, even if it seems overly verbose for human writers.</p>

      <!--
      <hr/>

      <p>For more information of Sable and access to the mailing list see:</p>
      <blckquote><a target="_blank" href="http://www.cstr.ed.ac.uk/projects/sable.html">http://www.cstr.ed.ac.uk/projects/sable.html</a></blckquote>
      -->

      <hr/>

      <ul>
        <li><a href="#example">An example of Sable with descriptions</a></li>
        <li><a href="#supported-tags">Currently supported Sable tags</a></li>
        <li><a href="#adding-new-tags">Adding new Sable tags</a></li>
        <li><a href="#requirements">XML	Software environment requirements</a></li>
        <li><a href="#rendering">Rendering Sable files as speech</a></li>
      </ul>


      <section id="example">
        <h2>An example of Sable with descriptions</h2>
        <p>Here is a simple example of Sable marked up text:</p>
        <pre>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE SABLE PUBLIC "-//SABLE//DTD SABLE speech mark up//EN"
      "Sable.v0_2.dtd"
[]&gt;
&lt;SABLE&gt;
&lt;SPEAKER NAME="male1"&gt;

The boy saw the girl in the park &lt;BREAK/&gt; with the telescope.
The boy saw the girl &lt;BREAK/&gt; in the park with the telescope.

Good morning &lt;BREAK /&gt; My name is Stuart, which is spelled
&lt;RATE SPEED="-40%"&gt;
&lt;SAYAS MODE="literal"&gt;stuart&lt;/SAYAS&gt; &lt;/RATE&gt;
though some people pronounce it
&lt;PRON SUB="stoo art"&gt;stuart&lt;/PRON&gt;.  My telephone number
is &lt;SAYAS MODE="literal"&gt;2787&lt;/SAYAS&gt;.

I used to work in &lt;PRON SUB="Buckloo"&gt;Buccleuch&lt;/PRON&gt; Place,
but no one can pronounce that.

By the way, my telephone number is actually
&lt;AUDIO SRC="http://www.cstr.ed.ac.uk/~awb/sounds/touchtone.2.au"/&gt;
&lt;AUDIO SRC="http://www.cstr.ed.ac.uk/~awb/sounds/touchtone.7.au"/&gt;
&lt;AUDIO SRC="http://www.cstr.ed.ac.uk/~awb/sounds/touchtone.8.au"/&gt;
&lt;AUDIO SRC="http://www.cstr.ed.ac.uk/~awb/sounds/touchtone.7.au"/&gt;.
&lt;/SPEAKER&gt;
&lt;/SABLE&gt;</pre>
        <p>After the initial definition of the SABLE tags, through the file <cite>Sable.v0_2.dtd</cite>, which is distributed as part of Festival, the body is given. There are tags for identifying the language and the voice. Explicit boundary markers may be given in text. Also duration and intonation control can be explicit specified as can new pronunciations of words. The last sentence specifies some external filenames to play at that point.</p>
        <pre></pre>
      </section>

      <section id="supported-tags">
        <h2>Currently supported Sable tags</h2>
        <p>There is not yet a definitive set of tags but hopefully such a list will form over the next few months. As adding support for new tags is often trivial the problem lies much more in defining what tags there should be than in actually implementing them. The following are based on version 0.2 of Sable as described in <cite><a href="http://www.cstr.ed.ac.uk/projects/sable_spec2.html">http://www.cstr.ed.ac.uk/projects/sable_spec2.html</a></cite>, though some aspects are not currently supported in this implementation. Further updates will be announces through the Sable mailing list.</p>
        <dl>
          <dt><code>LANGUAGE</code></dt>
          <dd>
            <p>Allows the specification of the language through the ID attribute. Valid values in Festival are, english, en1, spanish, en, and others depending on your particular installation. For example</p>
            <pre>&lt;LANGUAGE id="english"&gt; ... &lt;/LANGUAGE&gt;</pre>
            <p>If the language isn&apos;t supported by the particualr installation of Festival <q>Some text in ..</q> is said instead and the section is ommitted.</p>
          </dd>
          <dt><code>SPEAKER</code></dt>
          <dd>
            <p>Select a voice. Accepts a parameter NAME which takes values male1, male2, female1, etc. There is currently no definition about what happens when a voice is selected which the synthesizer doesn&apos;t support. An example is</p>
            <pre>&lt;SPEAKER name="male1"&gt; ... &lt;/SPEAKER&gt;</pre>
          </dd>
          <dt><code>AUDIO</code></dt>
          <dd>
            <p>This allows the specification of an external waveform that is to be included. There are attributes for specifying volume and whether the waveform is to be played in the background of the following text or not. Festival as yet only supports insertion.</p>
            <pre>My telephone number is
    &lt;AUDIO SRC="http://www.cstr.ed.ac.uk/~awb/sounds/touchtone.2.au"/&gt;
    &lt;AUDIO SRC="http://www.cstr.ed.ac.uk/~awb/sounds/touchtone.7.au"/&gt;
    &lt;AUDIO SRC="http://www.cstr.ed.ac.uk/~awb/sounds/touchtone.8.au"/&gt;
    &lt;AUDIO SRC="http://www.cstr.ed.ac.uk/~awb/sounds/touchtone.7.au"/&gt;</pre>
          </dd>
          <dt><code>MARKER</code></dt>
          <dd>
            <p>This allows Festival to mark when a particular part of the text has been reached. At present simply the value of the MARK attribute is printed. This is done when that piece of text is analyzed, not when it is played. To use this in any real application would require changes to this tags implementation.</p>
            <pre>Move the &lt;MARKER MARK="mouse" /&gt; mouse to the top.</pre>
          </dd>
          <dt><code>BREAK</code></dt>
          <dd>
            <p>Specifies a boundary at some LEVEL. Strength may be values <code>Large</code>, <code>Medium</code>, <code>Small</code> or a number. Note that this is an empty tag and must include the closing part within itself.</p>
            <pre>&lt;BREAK LEVEL="LARGE"/&gt;</pre>
          </dd>
          <dt><code>DIV</code></dt>
          <dd>
            <p>This signals an division. In Festival this causes an utterance break. A <code>TYPE</code> attribute may be specified but it is ignored by Festival.</p>
            <pre></pre>
          </dd>
          <dt><code>PRON</code></dt>
          <dd>
            <p>Allows pronunciation of enclosed text to be explcitily given. It supports the attributes <code>IPA</code> for an IPA specification (not currently supported by Festival); <code>SUB</code> text to be substituted which can be in some form of phonetic spelling, and <code>ORIGIN</code> where the linguistic origin of the enclosed text may be identified to assist in etymologically sensitive letter to sound rules.</p>
            <pre>&lt;PRON SUB="toe maa toe"&gt;tomato&lt;/PRON&gt;</pre>
          </dd>
          <dt><code>SAYAS</code></dt>
          <dd>
            <p>Allows identification of the enclosed tokens/text. The attribute <code>MODE</code> can take any of the following a values: <code>literal</code>, <code>date</code>, <code>time</code>, <code>phone</code>, <code>net</code>, <code>postal</code>, <code>currency</code>, <code>math</code>, <code>fraction</code>, <code>measure</code>, <code>ordinal</code>, <code>cardinal</code>, or <code>name</code>. Further specification of type for dates (MDY, DMY etc) may be speficied through the <code>MODETYPE</code> attribute.</p>
            <p>As a test of marked-up numbers. Here we have:</p>
<pre>    a year &lt;SAYAS MODE="date"&gt;1998&lt;/SAYAS&gt;,
    an ordinal &lt;SAYAS MODE="ordinal"&gt;1998&lt;/SAYAS&gt;,
    a cardinal &lt;SAYAS MODE="cardinal"&gt;1998&lt;/SAYAS&gt;,
    a literal &lt;SAYAS MODE="literal"&gt;1998&lt;/SAYAS&gt;,
    and phone number &lt;SAYAS MODE="phone"&gt;1998&lt;/SAYAS&gt;.</pre>
          </dd>
          <dt><code>EMPH</code></dt>
          <dd>
            <p>To specify enclose text should be emphasized, a <code>LEVEL</code> attribute may be specified but its value is currently ignored by Festival (besides the emphasis Festival generates isn&apos;t very good anyway).</p>
            <pre>The leaders of &lt;EMPH&gt;Denmark&lt;/EMPH&gt; and &lt;EMPH&gt;India&lt;/EMPH&gt;
            meet on Friday.</pre>
          </dd>
          <dt><code>PITCH</code></dt>
          <dd>
            <p>Allows the specification of pitch range, mid and base points.</p>
            <pre>Without his penguin, &lt;PITCH BASE="-20%"&gt; which he left at home, &lt;/PITCH&gt;
he could not enter the restaurant.</pre>
          </dd>
          <dt><code>RATE</code></dt>
          <dd>
            <p>Allows the specification of speaking rate</p>
            <pre>The address is &lt;RATE SPEED="-40%"&gt; 10 Main Street &lt;/RATE&gt;.</pre>
          </dd>
          <dt><code>VOLUME</code></dt>
          <dd>
            <p>Allows the specification of volume. Note in festival this causes an utterance break before and after this tag.</p>
<pre>    Please speak more &lt;VOLUME LEVEL="loud"&gt;loudly&lt;/VOLUME&gt;, except
    when I ask you to speak &lt;VOLUME LEVEL="quiet"&gt;in a quiet voice&lt;/VOLUME&gt;.</pre>
          </dd>
          <dt><code>ENGINE</code></dt>
          <dd>
            <p>This allows specification of engine specific commands</p>
            <pre>An example is &lt;ENGINE ID="festival" DATA="our own festival speech
synthesizer"&gt; the festival speech synthesizer&lt;/ENGINE&gt; or
the Bell Labs speech synthesizer.</pre>
          </dd>
        </dl>
        <p>These tags may change in name but they cover the aspects of speech mark up that we wish to express. Later additions and changes to these are expected.</p>
        <p>See the files <cite>festival/examples/example.sable</cite> and <cite>festival/examples/example2.sable</cite> for working examples.</p>
        <p>Note the definition of Sable is on-going and there are likely to be later more complete implementations of sable for Festival as independent releases. Consult <cite>url://www.cstr.ed.ac.uk/projects/sable.html</cite> for the most recent updates.</p>
      </section>

      <section id="adding-new-tags">
        <h2>Adding new Sable tags*</h2>
      </section>

      <section id="requirements">
        <h2>XML Software environment requirements*</h2>
      </section>

      <section id="using">
        <h2>Using Sable</h2>
        <p>Support in Festival for Sable is as a text mode. In the command mode use the following to process a Sable file</p>
        <pre>(tts "file.sable" 'sable)</pre>
        <p>Also the automatic selection of mode based on file type has been set up such that files ending <q>.sable</q> will be automatically synthesized in this mode. Thus</p>
        <pre>festival --tts fred.sable</pre>
        <p>will render <cite>fred.sable</cite> as speech in Sable mode.</p>
        <hr/>
        <p>Another way of using Sable is through the Emacs interface. The <code>say-buffer</code> command will send the Emacs buffer mode to Festival as its tts-mode. If the Emacs mode is stml or sgml, the file is treated as a sable file.<!-- See section Emacs interface.--></p>
        <hr/>
        <p>Many people experimenting with Sable (and TTS in general) often want all the waveform output to be saved to be played at a later date. The simplest way to do this is using the <code>text2wave</code> script, It respects the audo mode selection:</p>
        <pre>text2wave fred.sable -o fred.wav</pre>
        <p>Note: this renders the file as a single waveform (done by concatenating the waveforms for each utterance in the Sable file).</p>
        <p>If you wish the waveform for each utterance in a file saved you can cause the tts process to save the waveforms during synthesis:</p>
        <pre>festival> (save_waves_during_tts)</pre>
        <p>Any future call to tts will cause the waveforms to be saved in a file <cite>tts_file_<var>xxx</var>.wav</cite>, where <var>xxx</var> is a number. A call to <code>(save_waves_during_tts_STOP)</code> will stop saving the waves. A message is printed when the waveform is saved otherwise people forget about this and wonder why their disk has filled up.</p>
        <p>This is done by inserting a function in <code>tts_hooks</code>, which saves the wave. To do other things to each utterances during TTS (such as saving the utterance structure), try redefining the function <code>save_tts_output</code> (see <cite>festival/lib/tts.scm</cite>).</p>
      </section>

      <section id="rendering">
        <h2>Rendering Sable files as speech*</h2>
      </section>


    </main>

  </body>

</html>
